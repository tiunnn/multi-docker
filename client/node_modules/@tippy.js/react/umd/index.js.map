{"version":3,"file":"index.js","sources":["../src/utils.js","../src/Tippy.js","../src/TippyGroup.js"],"sourcesContent":["import { useRef } from 'react'\n\nexport const isBrowser =\n  typeof window !== 'undefined' && typeof document !== 'undefined'\n\nexport function preserveRef(ref, node) {\n  if (ref) {\n    if (typeof ref === 'function') {\n      ref(node)\n    }\n    if ({}.hasOwnProperty.call(ref, 'current')) {\n      ref.current = node\n    }\n  }\n}\n\nexport function ssrSafeCreateDiv() {\n  return isBrowser && document.createElement('div')\n}\n\nexport function updateClassName(tooltip, action, classNames) {\n  classNames.split(/\\s+/).forEach(name => {\n    if (name) {\n      tooltip.classList[action](name)\n    }\n  })\n}\n\nexport function useInstance(initialValue = {}) {\n  // Using refs instead of state as it's recommended to not store imperative\n  // values in state due to memory problems in React(?)\n  const ref = useRef()\n\n  if (!ref.current) {\n    ref.current =\n      typeof initialValue === 'function' ? initialValue() : initialValue\n  }\n\n  return ref.current\n}\n","import React, {\n  forwardRef,\n  cloneElement,\n  useState,\n  useEffect,\n  useLayoutEffect,\n} from 'react'\nimport { createPortal } from 'react-dom'\nimport PropTypes from 'prop-types'\nimport tippy from 'tippy.js'\nimport {\n  isBrowser,\n  ssrSafeCreateDiv,\n  preserveRef,\n  updateClassName,\n  useInstance,\n} from './utils'\n\n// React currently throws a warning when using useLayoutEffect on the server. To\n// get around it, we can conditionally useEffect on the server (no-op) and\n// useLayoutEffect in the browser. We need useLayoutEffect because we want Tippy\n// to perform sync mutations to the DOM elements after renders to prevent\n// jitters/jumps, especially when updating content.\nconst useIsomorphicLayoutEffect = isBrowser ? useLayoutEffect : useEffect\n\nfunction Tippy({\n  children,\n  content,\n  className,\n  onCreate,\n  isVisible, // deprecated\n  isEnabled, // deprecated\n  visible,\n  enabled,\n  ignoreAttributes = true,\n  multiple = true,\n  ...restOfNativeProps\n}) {\n  // `isVisible` / `isEnabled` renamed to `visible` / `enabled`\n  enabled =\n    enabled !== undefined ? enabled : isEnabled !== undefined ? isEnabled : true\n  visible = visible !== undefined ? visible : isVisible\n\n  const isControlledMode = visible !== undefined\n\n  const [mounted, setMounted] = useState(false)\n  const component = useInstance(() => ({\n    container: ssrSafeCreateDiv(),\n    renders: 1,\n  }))\n\n  const options = {\n    ignoreAttributes,\n    multiple,\n    ...restOfNativeProps,\n    content: component.container,\n  }\n\n  if (isControlledMode) {\n    options.trigger = 'manual'\n  }\n\n  useIsomorphicLayoutEffect(() => {\n    const instance = tippy(component.ref, options)\n\n    component.instance = instance\n\n    if (onCreate) {\n      onCreate(instance)\n    }\n\n    if (!enabled) {\n      instance.disable()\n    }\n\n    if (visible) {\n      instance.show()\n    }\n\n    setMounted(true)\n\n    return () => {\n      instance.destroy()\n    }\n  }, [children.type])\n\n  useIsomorphicLayoutEffect(() => {\n    // Prevent this effect from running on 1st render\n    if (component.renders === 1) {\n      component.renders++\n      return\n    }\n\n    const { instance } = component\n\n    instance.set(options)\n\n    if (enabled) {\n      instance.enable()\n    } else {\n      instance.disable()\n    }\n\n    if (isControlledMode) {\n      if (visible) {\n        instance.show()\n      } else {\n        instance.hide()\n      }\n    }\n  })\n\n  useIsomorphicLayoutEffect(() => {\n    if (className) {\n      const { tooltip } = component.instance.popperChildren\n      updateClassName(tooltip, 'add', className)\n      return () => {\n        updateClassName(tooltip, 'remove', className)\n      }\n    }\n  }, [className])\n\n  return (\n    <>\n      {cloneElement(children, {\n        ref(node) {\n          component.ref = node\n          preserveRef(children.ref, node)\n        },\n      })}\n      {mounted && createPortal(content, component.container)}\n    </>\n  )\n}\n\nif (process.env.NODE_ENV !== 'production') {\n  const ContentType = PropTypes.oneOfType([\n    PropTypes.number,\n    PropTypes.string,\n    PropTypes.element,\n  ])\n\n  Tippy.propTypes = {\n    content: PropTypes.oneOfType([ContentType, PropTypes.arrayOf(ContentType)])\n      .isRequired,\n    children: PropTypes.element.isRequired,\n    onCreate: PropTypes.func,\n    isVisible: PropTypes.bool, // deprecated\n    isEnabled: PropTypes.bool, // deprecated\n    visible: PropTypes.bool,\n    enabled: PropTypes.bool,\n    className: PropTypes.string,\n  }\n}\n\nexport default forwardRef(function TippyWrapper({ children, ...props }, ref) {\n  return (\n    <Tippy {...props}>\n      {cloneElement(children, {\n        ref(node) {\n          preserveRef(ref, node)\n          preserveRef(children.ref, node)\n        },\n      })}\n    </Tippy>\n  )\n})\n","import { Children, cloneElement, useEffect } from 'react'\nimport PropTypes from 'prop-types'\nimport tippy from 'tippy.js'\nimport { useInstance } from './utils'\n\nexport default function TippyGroup({ children, ...props }) {\n  const component = useInstance({ instances: [] })\n\n  useEffect(() => {\n    component.instances = component.instances.filter(i => !i.state.isDestroyed)\n    tippy.group(component.instances, props)\n  })\n\n  return Children.map(children, child => {\n    return cloneElement(child, {\n      onCreate(instance) {\n        if (child.props.onCreate) {\n          child.props.onCreate(instance)\n        }\n\n        component.instances.push(instance)\n      },\n    })\n  })\n}\n\nif (process.env.NODE_ENV !== 'production') {\n  TippyGroup.propTypes = {\n    children: PropTypes.arrayOf(PropTypes.element).isRequired,\n  }\n}\n"],"names":["isBrowser","window","document","preserveRef","ref","node","hasOwnProperty","call","current","ssrSafeCreateDiv","createElement","updateClassName","tooltip","action","classNames","split","forEach","name","classList","useInstance","initialValue","useRef","useIsomorphicLayoutEffect","useLayoutEffect","useEffect","Tippy","children","content","className","onCreate","isVisible","isEnabled","visible","enabled","ignoreAttributes","multiple","restOfNativeProps","undefined","isControlledMode","useState","mounted","setMounted","component","container","renders","options","trigger","instance","tippy","disable","show","destroy","type","set","enable","hide","popperChildren","React","cloneElement","createPortal","process","env","NODE_ENV","ContentType","PropTypes","oneOfType","number","string","element","propTypes","arrayOf","isRequired","func","bool","forwardRef","TippyWrapper","props","TippyGroup","instances","filter","i","state","isDestroyed","group","Children","map","child","push"],"mappings":"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"}