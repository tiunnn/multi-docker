{"version":3,"file":"index.min.js","sources":["../src/utils.js","../src/Tippy.js","../src/TippyGroup.js"],"sourcesContent":["import { useRef } from 'react'\n\nexport const isBrowser =\n  typeof window !== 'undefined' && typeof document !== 'undefined'\n\nexport function preserveRef(ref, node) {\n  if (ref) {\n    if (typeof ref === 'function') {\n      ref(node)\n    }\n    if ({}.hasOwnProperty.call(ref, 'current')) {\n      ref.current = node\n    }\n  }\n}\n\nexport function ssrSafeCreateDiv() {\n  return isBrowser && document.createElement('div')\n}\n\nexport function updateClassName(tooltip, action, classNames) {\n  classNames.split(/\\s+/).forEach(name => {\n    if (name) {\n      tooltip.classList[action](name)\n    }\n  })\n}\n\nexport function useInstance(initialValue = {}) {\n  // Using refs instead of state as it's recommended to not store imperative\n  // values in state due to memory problems in React(?)\n  const ref = useRef()\n\n  if (!ref.current) {\n    ref.current =\n      typeof initialValue === 'function' ? initialValue() : initialValue\n  }\n\n  return ref.current\n}\n","import React, {\n  forwardRef,\n  cloneElement,\n  useState,\n  useEffect,\n  useLayoutEffect,\n} from 'react'\nimport { createPortal } from 'react-dom'\nimport PropTypes from 'prop-types'\nimport tippy from 'tippy.js'\nimport {\n  isBrowser,\n  ssrSafeCreateDiv,\n  preserveRef,\n  updateClassName,\n  useInstance,\n} from './utils'\n\n// React currently throws a warning when using useLayoutEffect on the server. To\n// get around it, we can conditionally useEffect on the server (no-op) and\n// useLayoutEffect in the browser. We need useLayoutEffect because we want Tippy\n// to perform sync mutations to the DOM elements after renders to prevent\n// jitters/jumps, especially when updating content.\nconst useIsomorphicLayoutEffect = isBrowser ? useLayoutEffect : useEffect\n\nfunction Tippy({\n  children,\n  content,\n  className,\n  onCreate,\n  isVisible, // deprecated\n  isEnabled, // deprecated\n  visible,\n  enabled,\n  ignoreAttributes = true,\n  multiple = true,\n  ...restOfNativeProps\n}) {\n  // `isVisible` / `isEnabled` renamed to `visible` / `enabled`\n  enabled =\n    enabled !== undefined ? enabled : isEnabled !== undefined ? isEnabled : true\n  visible = visible !== undefined ? visible : isVisible\n\n  const isControlledMode = visible !== undefined\n\n  const [mounted, setMounted] = useState(false)\n  const component = useInstance(() => ({\n    container: ssrSafeCreateDiv(),\n    renders: 1,\n  }))\n\n  const options = {\n    ignoreAttributes,\n    multiple,\n    ...restOfNativeProps,\n    content: component.container,\n  }\n\n  if (isControlledMode) {\n    options.trigger = 'manual'\n  }\n\n  useIsomorphicLayoutEffect(() => {\n    const instance = tippy(component.ref, options)\n\n    component.instance = instance\n\n    if (onCreate) {\n      onCreate(instance)\n    }\n\n    if (!enabled) {\n      instance.disable()\n    }\n\n    if (visible) {\n      instance.show()\n    }\n\n    setMounted(true)\n\n    return () => {\n      instance.destroy()\n    }\n  }, [children.type])\n\n  useIsomorphicLayoutEffect(() => {\n    // Prevent this effect from running on 1st render\n    if (component.renders === 1) {\n      component.renders++\n      return\n    }\n\n    const { instance } = component\n\n    instance.set(options)\n\n    if (enabled) {\n      instance.enable()\n    } else {\n      instance.disable()\n    }\n\n    if (isControlledMode) {\n      if (visible) {\n        instance.show()\n      } else {\n        instance.hide()\n      }\n    }\n  })\n\n  useIsomorphicLayoutEffect(() => {\n    if (className) {\n      const { tooltip } = component.instance.popperChildren\n      updateClassName(tooltip, 'add', className)\n      return () => {\n        updateClassName(tooltip, 'remove', className)\n      }\n    }\n  }, [className])\n\n  return (\n    <>\n      {cloneElement(children, {\n        ref(node) {\n          component.ref = node\n          preserveRef(children.ref, node)\n        },\n      })}\n      {mounted && createPortal(content, component.container)}\n    </>\n  )\n}\n\nif (process.env.NODE_ENV !== 'production') {\n  const ContentType = PropTypes.oneOfType([\n    PropTypes.number,\n    PropTypes.string,\n    PropTypes.element,\n  ])\n\n  Tippy.propTypes = {\n    content: PropTypes.oneOfType([ContentType, PropTypes.arrayOf(ContentType)])\n      .isRequired,\n    children: PropTypes.element.isRequired,\n    onCreate: PropTypes.func,\n    isVisible: PropTypes.bool, // deprecated\n    isEnabled: PropTypes.bool, // deprecated\n    visible: PropTypes.bool,\n    enabled: PropTypes.bool,\n    className: PropTypes.string,\n  }\n}\n\nexport default forwardRef(function TippyWrapper({ children, ...props }, ref) {\n  return (\n    <Tippy {...props}>\n      {cloneElement(children, {\n        ref(node) {\n          preserveRef(ref, node)\n          preserveRef(children.ref, node)\n        },\n      })}\n    </Tippy>\n  )\n})\n","import { Children, cloneElement, useEffect } from 'react'\nimport PropTypes from 'prop-types'\nimport tippy from 'tippy.js'\nimport { useInstance } from './utils'\n\nexport default function TippyGroup({ children, ...props }) {\n  const component = useInstance({ instances: [] })\n\n  useEffect(() => {\n    component.instances = component.instances.filter(i => !i.state.isDestroyed)\n    tippy.group(component.instances, props)\n  })\n\n  return Children.map(children, child => {\n    return cloneElement(child, {\n      onCreate(instance) {\n        if (child.props.onCreate) {\n          child.props.onCreate(instance)\n        }\n\n        component.instances.push(instance)\n      },\n    })\n  })\n}\n\nif (process.env.NODE_ENV !== 'production') {\n  TippyGroup.propTypes = {\n    children: PropTypes.arrayOf(PropTypes.element).isRequired,\n  }\n}\n"],"names":["isBrowser","window","document","preserveRef","ref","node","hasOwnProperty","call","current","updateClassName","tooltip","action","classNames","split","forEach","name","classList","useInstance","initialValue","useRef","useIsomorphicLayoutEffect","useLayoutEffect","useEffect","Tippy","children","content","className","onCreate","isVisible","isEnabled","visible","enabled","ignoreAttributes","multiple","restOfNativeProps","undefined","isControlledMode","useState","mounted","setMounted","component","container","createElement","renders","options","trigger","instance","tippy","disable","show","destroy","type","set","enable","hide","popperChildren","React","cloneElement","createPortal","process","env","NODE_ENV","ContentType","PropTypes","oneOfType","number","string","element","propTypes","arrayOf","isRequired","func","bool","forwardRef","props","TippyGroup","instances","filter","i","state","isDestroyed","group","Children","map","child","push"],"mappings":"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"}